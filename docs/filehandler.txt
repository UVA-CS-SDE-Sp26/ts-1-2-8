Top Secret – File Handler Design Documentation
Role B: File Handler
Date: 2/10/26

===========================================
ROLE & RESPONSIBILITIES
===========================================

Role B is responsible for ALL direct filesystem access in the program.

The FileHandler module:
- Accesses the operating system filesystem
- Provides a clean API for listing data files and reading file contents
- Returns raw file text only
- Does NOT print to the console
- Does NOT perform deciphering (handled by Cipher module)

FileHandler serves as the data access layer between the filesystem and ProgramControl.

===========================================
FOLDER & FILE EXPECTATIONS
===========================================

- The program expects a folder named: data/
- Primary location: ./data relative to the working directory
- Data files must be plain text (.txt)

File numbering:
- Users interact with files using numbers: 01, 02, 03, ...
- FileHandler maps these numbers to actual files

Recommended (not required) naming convention:
01 filea.txt
02 fileb.txt
03 filec.txt

If filenames do not include numeric prefixes, FileHandler assigns numbers after sorting.

===========================================
DESIGN OVERVIEW
===========================================

Class: FileHandler

Primary responsibility:
Provide a stable and predictable mapping between user-facing file numbers and actual files on disk.

===========================================
PUBLIC API (METHODS)
===========================================

1. List<FileEntry> listDataFiles()

Purpose:
Return an ordered list of available data files.

Behavior:
- Locate all .txt files in the data/ folder
- Sort files in a predictable order (alphabetical by filename)
- Assign display numbers:
  - If filenames begin with two digits, reuse those digits
  - Otherwise assign sequential numbers (01, 02, 03, ...)

Output:
- List of FileEntry objects containing:
  - displayNumber
  - filename
  - optional Path

Errors:
- Missing data/ folder → empty list or exception (team decision)
- No .txt files → empty list

-------------------------------------------

2. String readFileByNumber(String fileNumber)

Purpose:
Return the raw contents of a file selected by its display number.

Behavior:
- Uses listDataFiles() to resolve the file mapping
- Locates the file corresponding to the given number
- Reads the entire file content
- Preserves original formatting and newlines
- Returns raw text (ciphered or plain)

Errors:
- Invalid or unmapped file number → exception
- File read failure (I/O or permissions) → exception

-------------------------------------------

3. (Optional Helper) Path resolvePathToDataFolder()

Purpose:
Determine the correct path to the data/ directory.

Behavior:
- Primary assumption: ./data
- Used internally to centralize path resolution

===========================================
DATA STRUCTURES SHARED WITH PROGRAMCONTROL
===========================================

Class: FileEntry
- String displayNumber (e.g., "01")
- String filename (e.g., "filea.txt")
- Path path (optional)

ProgramControl uses this data to display:
01 filea.txt
02 fileb.txt
03 filec.txt

===========================================
INTERACTION WITH OTHER ROLES
===========================================

Interaction with ProgramControl (Role C):
- ProgramControl calls listDataFiles() to display files
- ProgramControl calls readFileByNumber() to retrieve file contents
- ProgramControl handles all output and user-facing messages

Interaction with Cipher (Role D):
- FileHandler has NO interaction with Cipher
- Raw text returned by FileHandler is passed to Cipher by ProgramControl if needed

===========================================
ERROR HANDLING STRATEGY
===========================================

FileHandler detects errors but does not print messages.

Handled cases:
- data/ folder missing
- Invalid file number
- File exists but cannot be read

Recommended approach:
- Throw exceptions with meaningful messages
- ProgramControl catches exceptions and prints a single error line

===========================================
TESTING PLAN (ROLE B OWNERSHIP)
===========================================

FileHandler unit tests should cover:

- listDataFiles returns correct file count
- Stable ordering of files
- Correct numbering behavior
- readFileByNumber returns correct content
- Error cases:
  - missing data folder
  - invalid file number
  - unreadable file

Cipher decoding is NOT tested here.

===========================================
ASSUMPTIONS & CONSTRAINTS
===========================================

1. FileHandler is the only class allowed to access the filesystem
2. ProgramControl must use FileHandler for all file operations
3. File numbers are user-facing and 1-indexed
4. Internal access may be 0-indexed
5. FileHandler never prints to console
6. FileHandler never performs deciphering

===========================================
DELIVERABLES
===========================================

Week 1:
- Submit docs/filehandler.txt
- Agree on numbering and error-handling strategy with team

Week 2:
- Implement FileHandler and FileEntry
- Implement unit tests
